<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.4/css/jquery.dataTables.css">
    <link type="text/css" rel="stylesheet" href="styles/home.css">
    <link type="text/css" rel="stylesheet" href="styles/newGuest.css">
    <title>New Guest</title>
</head>
<body>
    <include href="views/header.html"/>

    <div class="container">
        <form action="#" method="post" id="formGuest">
            <h2>Outreach Contact Report</h2>
            <p id="obligitory"><i>* obligatory fields</i></p>
            <fieldset class="form-group">
                <legend>Guest's Information</legend>
                <div class="row">
                    <div class="form-group col-8">
                        <label class="form-control-label"><b>*Name:</b>
                            <!-- check for valid fist and last name -->
                            <check if="{{ isset(@invalidFirstName) }}">
                                <span class="text-danger font-weight-normal"> - Invalid first name</span>
                            </check>
                            <check if="{{ isset(@invalidLastName) }}">
                                <span class="text-danger font-weight-normal"> - Invalid Last name</span>
                            </check>

                        </label>
                        <div class="row">
                            <div class="form-group col-6">
                                <input class="form-control" type="text" id="first" name="first" placeholder="First Name"
                                <check if="{{ isset(@firstName) }}">
                                    value="{{ @firstName }}"
                                </check>>
                            </div>
                            <div class="form-group col-6">
                                <input class="form-control" type="text" id="last" name="last" placeholder="Last Name"
                                <check if="{{ isset(@lastName) }}">
                                    value="{{ @lastName }}"
                                </check>>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-3">

                        <label for="birthdate" class="form-control-label"><b>*Date of Birth:</b>
                            <check if="{{ isset(@invalidBirthdate) }}">
                                <span class="text-danger font-weight-normal"> - Invalid</span>
                            </check>
                        </label>
                        <input type="date" class="form-control" id="birthdate" name="birthdate"
                        <check if="{{ isset(@birthdate) }}">
                            value="{{ @birthdate }}"
                        </check>>

                    </div>
                </div> <!-- row -->

                <div class="row">
                    <div class="form-group col-4">
                        <div class="row">
                            <div class="form-group col-10">
                                <label class="form-control-label">Phone:
                                    <check if="{{ isset(@invalidPhone) }}">
                                        <span class="text-danger font-weight-normal"> - Invalid</span>
                                    </check>
                                </label>
                                <input class="form-control" type="text" id="phone" name="phone" maxlength="10" placeholder="no spaces or dashes"
                                <check if="{{ isset(@phone) }}">
                                    value="{{ @phone }}"
                                </check>>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-4">
                        <label class="form-control-label">Email:
                        </label>
                        <input class="form-control" type="email" id="email" name="email"
                        <check if="{{ isset(@email) }}">
                            value="{{ @email }}"
                        </check>>
                    </div>
                    <div class="form-group col-3">
                        <label class="form-check-label">Ethnicity:</label>
                        <label class="d-block"></label>
                        <select class="form-control dropdown" id="ethnicity" name="ethnicity">
                            <option value="">-- select one --</option>

                            <repeat group="{{@ethnicities}}" value="{{@ethnicity1}}">
                                <option <check if="{{ @ethnicity1 == @ethnicity }}">selected</check>  value="{{ @ethnicity1 }}" > {{ @ethnicity1 }}</option>
                            </repeat>
                        </select>
                    </div>
                </div> <!-- row -->

                <div class="row">
                    <div class="form-group col-10">
                        <label class="form-control-label">Address:</label>
                        <div class="row">
                            <div class="form-group col-5">
                                <input class="form-control" type="text" id="street" name="street" placeholder="Street"
                                <check if="{{ isset(@street) }}">
                                    value="{{ @street }}"
                                </check>>
                            </div>
                            <div class="form-group col-4">
                                <input class="form-control" type="text" id="city" name="city" placeholder="City"
                                <check if="{{ isset(@city) }}">
                                    value="{{ @city }}"
                                </check>>
                            </div>
                            <div class="form-group col-3">
                                <input class="form-control" type="text" id="zip" name="zip" placeholder="Zip" maxlength="5"
                                <check if="{{ isset(@zip) }}">
                                    value="{{ @zip }}"
                                </check>>
                            </div>
                        </div>
                    </div>
                </div> <!-- row -->

                <div class="row">
                    <div class="form-group col-3">
                        <div class="form-check">
                            <label class="d-block">Mental Disability:</label>
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id='mental' name='mental'
                                <check if="{{ isset(@mental) }}">
                                    checked
                                </check>>
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-3">
                        <div class="form-check">
                            <label class="d-block">Physical Disability:</label>
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id='physical' name='physical'
                                <check if="{{ isset(@physical) }}">
                                    checked
                                </check>>
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-3">
                        <div class="form-check">
                            <label class="d-block">Veteran:</label>
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id='veteran' name='veteran'
                                <check if="{{ isset(@veteran) }}">
                                    checked
                                </check>>
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-3">
                        <div class="form-check">
                            <label class="d-block">Homeless:</label>
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id='homeless' name='homeless'
                                <check if="{{ isset(@homeless) }}">
                                    checked
                                </check>>
                            </label>
                        </div>
                    </div>
                </div> <!-- row -->
            </fieldset>	<!-- Guest Information fieldset -->

            <fieldset class="form-group">
                <legend>Income and Accounts</legend>
                <div class="row">
                    <div class="form-group col-3">
                        <label class="form-control-label">Monthly income:
                            <check if="{{ isset(@invalidIncome) }}">
                                <span class="text-danger font-weight-normal"> - Invalid</span>
                            </check>
                        </label>
                        <div class="input-group">
                            <span class="input-group-addon">$</span><input class="form-control" type="tel" id="income" name="income"
                            <check if="{{ isset(@income) }}">
                                value="{{ @income }}"
                            </check>>
                        </div>
                    </div>
                    <div class="form-group col-3">
                        <label class="form-control-label">Monthly Rent:
                            <check if="{{ isset(@invalidRent) }}">
                                <span class="text-danger font-weight-normal"> - Invalid</span>
                            </check>
                        </label>
                        <div class="input-group">
                            <span class="input-group-addon">$</span><input class="form-control" type="text" id="rent" name="rent"
                            <check if="{{ isset(@rent) }}">
                                value="{{ @rent }}"
                            </check>>
                        </div>
                    </div>
                    <div class="form-group col-3">
                        <label class="form-control-label">Food Stamps:
                            <check if="{{ isset(@invalidFoodstamps) }}">
                                <span class="text-danger font-weight-normal"> - Invalid</span>
                            </check>
                        </label>
                        <div class="input-group">
                            <span class="input-group-addon">$</span><input class="form-control" type="text" id="foodStamp" name="foodStamp"
                            <check if="{{ isset(@foodStamp) }}">
                                value="{{ @foodStamp }}"
                            </check>>
                        </div>
                    </div>
                    <div class="form-group col-3">
                        <label class="form-control-label">Additional Support:
                            <check if="{{ isset(@invalidAddSupport) }}">
                                <span class="text-danger font-weight-normal"> - Invalid</span>
                            </check>
                        </label>
                        <div class="input-group">
                            <span class="input-group-addon">$</span><input class="form-control" type="text" id="addSupport" name="addSupport"
                            <check if="{{ isset(@addSupport) }}">
                                value="{{ @addSupport }}"
                            </check>>
                        </div>
                    </div>
                </div> <!-- row -->

                <div class="row">
                    <div class="form-group col-4">
                        <label class="form-control-label">Driver's License or Photo ID#:</label><input class="form-control" type="text" id="license" name="license"
                        <check if="{{ isset(@license) }}">
                            value="{{ @license }}"
                        </check>>
                    </div>
                    <div class="form-group col-4">
                        <label class="form-control-label">Puget Sound Energy Account #:</label><input class="form-control" type="tel" id="pse" name="pse"
                        <check if="{{ isset(@pse) }}">
                            value="{{ @pse }}"
                        </check>>
                    </div>
                    <div class="form-group col-4">
                        <label class="form-control-label">Water Account #:</label><input class="form-control" type="text" id="water" name="water"
                        <check if="{{ isset(@water) }}">
                            value="{{ @water }}"
                        </check>>
                    </div>
                </div> <!-- row -->
            </fieldset> <!-- Income and Accounts fieldset -->

            <fieldset class="form-group">
                <legend>Household Members</legend>
                <div class="row" id="household">
                    <div class="form-group col-4">
                        <label class="form-checkNum-label">Members in household:</label>
                        <button class="btn btn-light" id="member-button">Add member</button>
                    </div>
                </div> <!-- row -->
                        <span id="member-div">

                        </span>
            </fieldset> <!-- Household Member fieldset -->
            <fieldset class="form-group">
                <legend>Help Provided</legend>
                <div class="row">
                    <div class="form-group col-12">
                        <label class="form-control-label">Interviewer's notes:</label>
                        <textarea class="form-control" id="notes" name="notes" rows="4"><check if="{{ isset(@notes) }}">{{ @notes }}</check></textarea>
                    </div>
                </div> <!-- row -->

                <div class="row" id="checkvoucher">
                    <div class="form-group col-4">
                        <label class="form-checkNum-label">Vouchers</label>
                        <button class="btn btn-light" id="voucher-button">Add voucher</button>
                    </div>
                </div> <!-- row -->

                    <span id="voucher-div">

                    </span>
            </fieldset> <!-- Help Provided Fieldset -->

            <input id="preview" name="preview" type="button" value="Preview &raquo;" data-toggle='modal' data-target='#confirm-submit'>
            <input id="submit" name="submit" type="submit" value="Submit Guest &raquo;">
        </form>	<!-- Guest Form -->
        <div class="modal fade" id="confirm-submit" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header"><h4>Preview Form</h4></div>
                    <div class="modal-body" id="previewForm">
                        <h6>Are you sure you want to submit the following details?</h6>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="close" class="btn btn-default" data-dismiss="modal">Return</button>
                    </div>
                </div>
            </div>
        </div> <!-- Preview Form -->
    </div>
    <!-- Bootstrap and jQuery -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/newGuest.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

    <script>

        $( "#member-button" ).click(function(event) { // event,the click
            event.preventDefault();

            var anyMembersOnPage = $('.new-member');
            console.log(anyMembersOnPage);

            var newMemberIdNumber = "";
            if(anyMembersOnPage.length > 0) {
                console.log("Getting the new Id: ");

                var lastElement = anyMembersOnPage[anyMembersOnPage.length-1];
                console.log(lastElement);

                newIncrement = parseInt(($(lastElement).attr("id")).substring(6)) + 1;
                newMemberIdNumber = "member" + newIncrement;
                console.log(newMemberIdNumber);
            } else {
                newMemberIdNumber = "member1"
            }

            var text = "<div class='new-member row' id='" + newMemberIdNumber + "'>";
                text += "<div class='form-group col-5'>";
                    text += "<label class='form-control-label'>Name:</label><input class='form-control' type='text' name='name'>";
                text+= "</div>";

                text += "<div class='form-group col-2'>";
                    text += "<label class='form-control-label'>Age:</label><input class='form-control' type='text' name='age' maxlength='3'>";
                text += "</div>";

                text += "<div class='form-group col-2'>";
                    text += "<label class='form-check-label'>Gender:</label>";
                    text += "<label class='d-block'></label>";
                    text += "<select class='form-control dropdown' name='gender'>";
                        text += "<option value=''>select one</option>";
                        text += "<option value='male'>Male</option>";
                        text += "<option value='female'>Female</option>";
                        text += "<option value='other'>Other</option>";
                    text += "</select>";
                text += "</div>";
            text += "</div>";

            $( "#member-div" ).append(text);
            //createElement
        });


        $( "#voucher-button" ).click(function(event) { // event,the click
            event.preventDefault();

            var anyVocuhersOnPage = $('.new-voucher');
            console.log(anyVocuhersOnPage);

            var newVoucherIdNumber = "";
            if(anyVocuhersOnPage.length > 0) {
                console.log("Getting the new Id: ");

                var lastElement = anyVocuhersOnPage[anyVocuhersOnPage.length-1];
                console.log(lastElement);

                newIncrement = parseInt(($(lastElement).attr("id")).substring(6)) + 1;
                newVoucherIdNumber = "member" + newIncrement;
                console.log(newVoucherIdNumber);
            } else {
                newVoucherIdNumber = "member1"
            }

            var vouch = "<div class='new-voucher' id='" + newVoucherIdNumber + "'>";
                vouch += "<div class='row' id='need'>";
                    vouch += "<div class='form-group col-3'>";
                        vouch += "<label class='form-control-label'>Voucher#:</label><input class='form-control' type='text' id='voucher' name='voucher'>";
                    vouch += "</div>";
                    vouch += "<div class='form-group col-3'>";
                        vouch += "<label class='form-control-label'>Check#:</label><input class='form-control' type='text' id='checkNum' name='checkNum'>";
                    vouch += "</div>";
                    vouch += "<div class='form-group col-2'>";
                        vouch += "<label class='form-control-label'>Amount:</label>";
                        vouch += "<div class='input-group'>";
                            vouch += "<span class='input-group-addon'>$</span><input class='form-control' type='amount' id='amount' name='amount'>";
                        vouch += "</div>";
                    vouch += "</div>";
                    vouch += "<div class='form-group col-3'>";
                        vouch += "<label class='form-check-label'>Resource needed:</label>";
                        vouch += "<label class='d-block'></label>";
                        vouch += "<select class='form-control dropdown' id='resource' name='resource'>";
                            vouch += "<option value=''>-- select one --</option>";
                            vouch += "<option value='thriftshop'>Thrift Shop</option>";
                            vouch += "<option value='gas'>Gas</option>";
                            vouch += "<option value='waterbill'>Water Bill</option>";
                            vouch += "<option value='energybill'>Energy Bill</option>";
                            vouch += "<option value='food'>Food</option>";
                            vouch += "<option value='dol'>Dept of Lisencing</option>";
                            vouch += "<option value='other'>Other</option>";
                        vouch += "</select>";
                    vouch += "</div>";
                vouch += "</div>";
            vouch += "</div>";

            $( "#voucher-div" ).append(vouch);
         });

    </script>


</body>
</html>